---
title: "Econ 293 Final Project Analysis Report"
author: 
- Chris Lin, Joseph Son
- (clin17@stanford.edu, joeson@stanford.edu)
date: '`r Sys.Date()`'
output: pdf_document
---


```{r load_process_data, warning=FALSE, message=FALSE}
source("helpers.R")
source("load-data.R")
data_01 <- split_control_treated(0, 1, df, covariate_names)
data_02 <- split_control_treated(0, 2, df, covariate_names)
data_03 <- split_control_treated(0, 3, df, covariate_names)
NUM_TREES <- 50
```

```{r hte_forests, warning=FALSE, message=FALSE}
results_forests_01 <- compare_forests(data_01$X, data_01$W, data_01$Y, data_01$ID, NUM_TREES)
results_forests_01$compare <- "0 vs 1"

results_forests_02 <- compare_forests(data_02$X, data_02$W, data_02$Y, data_02$ID, NUM_TREES)
results_forests_02$compare <- "0 vs 2"

results_forests_03 <- compare_forests(data_03$X, data_03$W, data_03$Y, data_03$ID, NUM_TREES)
results_forests_03$compare <- "0 vs 3"

results_forests <- Reduce(rbind, list(results_forests_01, 
                                      results_forests_02, 
                                      results_forests_03))
```

```{r hte_glmnets, warning=FALSE, message=FALSE}
results_glmnets_01 <- compare_glmnets(data_01$X, data_01$W, data_01$Y, data_01$ID, 10, 0, NUM_TREES)
results_glmnets_01$compare <- "0 vs 1"

results_glmnets_02 <- compare_glmnets(data_02$X, data_02$W, data_02$Y, data_02$ID, 10, 0, NUM_TREES)
results_glmnets_02$compare <- "0 vs 2"

results_glmnets_03 <- compare_glmnets(data_03$X, data_03$W, data_03$Y, data_03$ID, 10, 0, NUM_TREES)
results_glmnets_03$compare <- "0 vs 3"

results_glmnets <- Reduce(rbind, list(results_glmnets_01, 
                                      results_glmnets_02, 
                                      results_glmnets_03))
```

```{r ATE, warning=FALSE, message=FALSE}
calculate_ATE(data_01$df, data_02$df, data_03$df, 1)
calculate_ATE(data_01$df, data_02$df, data_03$df, 0.5)
```

